<!doctype html>
<html lang="zh-HK">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç«‹é«”åœ–å½¢é…å°é€šé—œï¼ˆåœ–ç‰‡ç‰ˆï¼‰</title>

  <style>
    body{
      margin:0;
      font-family:"Noto Sans TC","PingFang TC","Microsoft JhengHei",system-ui,sans-serif;
      background:#f6f7fb;
      color:#111827;
    }

    header{
      padding:16px;
      background:#ffffff;
      border-bottom:1px solid #e5e7eb;
    }

    header h1{ margin:0; font-size:18px; }
    header p{ margin:6px 0 0; font-size:13px; color:#6b7280; }

    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:16px;
    }

    .top{
      display:grid;
      grid-template-columns: 1.1fr 1.9fr;
      gap:14px;
    }

    .panel{
      background:#ffffff;
      border:1px solid #e5e7eb;
      border-radius:14px;
      box-shadow:0 8px 20px rgba(0,0,0,.06);
    }

    .hd{
      padding:12px 14px;
      border-bottom:1px solid #e5e7eb;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .bd{ padding:14px; }

    button{
      padding:8px 12px;
      border-radius:10px;
      border:1px solid #e5e7eb;
      background:#ffffff;
      cursor:pointer;
      font-size:14px;
    }

    button.primary{
      background:#2563eb;
      color:#ffffff;
      border:none;
    }

    button:disabled{ opacity:.5; }

    /* åœ–ç‰‡å€ */
    #imgWrap{
      height:360px;
      border:1px solid #e5e7eb;
      border-radius:12px;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#ffffff;
    }

    #shapeImg{
      width:100%;
      height:100%;
      object-fit:contain;
    }

    .status{
      margin-top:10px;
      padding:10px;
      border-radius:10px;
      border:1px dashed #e5e7eb;
      font-size:14px;
      color:#374151;
    }

    .good{ background:#ecfdf5; border-color:#86efac; }
    .bad{ background:#fef2f2; border-color:#fecaca; }

    .grid{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:12px;
    }

    .group h3{
      margin:0 0 6px;
      font-size:14px;
    }

    .opts{ display:flex; flex-wrap:wrap; gap:8px; }

    .opt{
      padding:8px 10px;
      border:1px solid #e5e7eb;
      border-radius:10px;
      cursor:pointer;
      background:#ffffff;
    }

    .opt.selected{
      outline:2px solid rgba(37,99,235,.35);
      border-color:#2563eb;
    }

    .footer{
      padding:12px 14px;
      border-top:1px solid #e5e7eb;
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:13px;
      color:#6b7280;
    }

    @media(max-width:900px){
      .top{ grid-template-columns:1fr; }
      #imgWrap{ height:300px; }
    }
  </style>
</head>

<body>
<header>
  <h1>ç«‹é«”åœ–å½¢é…å°é€šé—œ</h1>
  <p>è§€å¯Ÿå·¦é‚Šç«‹é«”åœ–å½¢åœ–ç‰‡ï¼Œå®Œæˆå³é‚Šå››é¡é…å°ã€‚</p>
</header>

<div class="wrap">
  <div class="top">

    <!-- å·¦é‚Šåœ–ç‰‡ -->
    <div class="panel">
      <div class="hd">
        <strong>ç«‹é«”åœ–å½¢</strong>
        <div>
          <button id="btnNew">ä¸‹ä¸€é¡Œ</button>
          <button id="btnReset">é‡è¨­</button>
        </div>
      </div>
      <div class="bd">
        <div id="imgWrap">
          <img id="shapeImg" />
        </div>
        <div id="status" class="status">
          æç¤ºï¼šè«‹å®Œæˆå³é‚Šå››é¡é…å°ã€‚
        </div>
      </div>
    </div>

    <!-- å³é‚Šé…å° -->
    <div class="panel">
      <div class="hd">
        <strong>å››é¡å­—å¡é…å°</strong>
      </div>
      <div class="bd">
        <div class="grid">
          <div class="group">
            <h3>A é¡ï¼šæŸ±é«”ï¼éŒ</h3>
            <div class="opts" id="A"></div>
          </div>
          <div class="group">
            <h3>B é¡ï¼šå´é¢å½¢ç‹€</h3>
            <div class="opts" id="B"></div>
          </div>
          <div class="group">
            <h3>C é¡ï¼šç¸½é¢æ•¸</h3>
            <div class="opts" id="C"></div>
          </div>
          <div class="group">
            <h3>D é¡ï¼šåå­—</h3>
            <div class="opts" id="D"></div>
          </div>
        </div>
      </div>
      <div class="footer">
        <span id="score">å·²é€šé—œï¼š0 ï½œ ç¸½é¡Œæ•¸ï¼š0</span>
        <button class="primary" id="btnSubmit" disabled>æäº¤</button>
      </div>
    </div>

  </div>
</div>

<script>
/* ===== è³‡æ–™ ===== */
const Ns = [3,4,5];
const Types = ["pyramid","prism"];
const map = {3:"ä¸‰",4:"å››",5:"äº”"};

function shapeName(n,t){ return map[n] + (t==="pyramid"?"è§’éŒ":"è§’æŸ±"); }
function faces(n,t){ return t==="pyramid"? n+1 : n+2; }
function imgPath(n,t){ return t + n + ".svg"; }

/* ===== ç‹€æ…‹ ===== */
let current, cleared=0, total=0;
let pick={A:null,B:null,C:null,D:null};

/* ===== DOM ===== */
const img=document.getElementById("shapeImg");
const status=document.getElementById("status");
const score=document.getElementById("score");
const submit=document.getElementById("btnSubmit");
const btnNew=document.getElementById("btnNew");
const btnReset=document.getElementById("btnReset");
const groups={A:A,B:B,C:C,D:D};

/* ===== å·¥å…· ===== */
function shuffle(a){
  const b=a.slice();
  for(let i=b.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [b[i],b[j]]=[b[j],b[i]];
  }
  return b;
}

/* ===== åŠŸèƒ½ ===== */
function resetPick(){
  pick={A:null,B:null,C:null,D:null};
  document.querySelectorAll(".opt").forEach(o=>o.classList.remove("selected"));
  submit.disabled=true;
  status.className="status";
  status.textContent="æç¤ºï¼šè«‹å®Œæˆå³é‚Šå››é¡é…å°ã€‚";
}

function option(group,text){
  const d=document.createElement("div");
  d.className="opt";
  d.textContent=text;
  d.onclick=()=>{
    pick[group]=text;
    [...groups[group].children].forEach(c=>c.classList.toggle("selected",c===d));
    submit.disabled=!(pick.A&&pick.B&&pick.C&&pick.D);
  };
  return d;
}

function build(){
  for(const k in groups) groups[k].innerHTML="";
  resetPick();

  const {n,t}=current;
  const ans={
    A: t==="pyramid"?"å®ƒæ˜¯éŒ":"å®ƒæ˜¯æŸ±é«”",
    B: t==="pyramid"?"å®ƒçš„å´é¢æ˜¯ä¸‰è§’å½¢":"å®ƒçš„å´é¢æ˜¯å››é‚Šå½¢",
    C: `å®ƒç¸½å…±æœ‰ï¼ˆ${faces(n,t)}ï¼‰å€‹é¢`,
    D: `å®ƒçš„åå­—æ˜¯ï¼ˆ${shapeName(n,t)}ï¼‰`
  };
  current.ans=ans;

  shuffle(["å®ƒæ˜¯æŸ±é«”","å®ƒæ˜¯éŒ"]).forEach(v=>groups.A.appendChild(option("A",v)));
  shuffle(["å®ƒçš„å´é¢æ˜¯ä¸‰è§’å½¢","å®ƒçš„å´é¢æ˜¯å››é‚Šå½¢"]).forEach(v=>groups.B.appendChild(option("B",v)));
  shuffle([faces(n,t),5,6,7].slice(0,3)).forEach(v=>groups.C.appendChild(option("C",`å®ƒç¸½å…±æœ‰ï¼ˆ${v}ï¼‰å€‹é¢`)));

  const names=[];
  while(names.length<4){
    const nm=shapeName(Ns[Math.floor(Math.random()*3)],Types[Math.floor(Math.random()*2)]);
    if(!names.includes(nm)) names.push(nm);
  }
  shuffle(names.map(v=>`å®ƒçš„åå­—æ˜¯ï¼ˆ${v}ï¼‰`)).forEach(v=>groups.D.appendChild(option("D",v)));
}

function newQ(){
  current={n:Ns[Math.floor(Math.random()*3)],t:Types[Math.floor(Math.random()*2)]};
  total++;
  score.textContent=`å·²é€šé—œï¼š${cleared} ï½œ ç¸½é¡Œæ•¸ï¼š${total}`;
  img.src=imgPath(current.n,current.t);
  img.onerror=()=>{
    status.className="status bad";
    status.textContent="åœ–ç‰‡æœªæˆåŠŸè¼‰å…¥ã€‚è«‹ç¢ºèª pyramid3.svg ç­‰åœ–ç‰‡èˆ‡ index.html æ”¾åœ¨åŒä¸€å±¤ï¼Œä¸¦å·² commitã€‚";
  };
  build();
}

function submitAns(){
  const wrong=Object.keys(current.ans).filter(k=>pick[k]!==current.ans[k]);
  if(wrong.length===0){
    cleared++;
    score.textContent=`å·²é€šé—œï¼š${cleared} ï½œ ç¸½é¡Œæ•¸ï¼š${total}`;
    status.className="status good";
    status.textContent="ğŸ‰ é€šé—œæˆåŠŸï¼";
  }else{
    status.className="status bad";
    status.textContent="æœªé€šé—œï¼Œè«‹å†è©¦ã€‚";
  }
}

/* ===== äº‹ä»¶ ===== */
btnNew.onclick=newQ;
btnReset.onclick=resetPick;
submit.onclick=submitAns;

/* ===== é–‹å§‹ ===== */
newQ();
</script>
</body>
</html>

