<!doctype html>
<html lang="zh-HK">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç«‹é«”åœ–å½¢é…å°é€šé—œï¼ˆéŠæˆ²ç‰ˆï¼‰</title>

  <style>
    :root{
      --ink:#0f172a;
      --muted:#475569;
      --white:#fff;
      --shadow: 0 18px 40px rgba(2,6,23,.18);
      --cardShadow: 0 12px 28px rgba(2,6,23,.14);
      --line: rgba(15,23,42,.10);
      --blue:#2563eb;
      --good:#16a34a;
      --bad:#dc2626;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:"Noto Sans TC","PingFang TC","Microsoft JhengHei",system-ui,sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1000px 500px at 10% 10%, rgba(59,130,246,.25), transparent 60%),
        radial-gradient(900px 520px at 90% 20%, rgba(34,197,94,.22), transparent 55%),
        radial-gradient(900px 520px at 40% 90%, rgba(245,158,11,.20), transparent 55%),
        linear-gradient(180deg, #f8fafc, #eef2ff);
      min-height:100vh;
    }

    header{
      padding:18px 18px 14px;
      max-width:1180px;
      margin:0 auto;
    }

    .titleRow{
      display:flex;
      flex-wrap:wrap;
      align-items:flex-end;
      justify-content:space-between;
      gap:10px;
    }

    h1{
      margin:0;
      font-size:20px;
      letter-spacing:.2px;
    }

    .sub{
      margin:8px 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.4;
    }

    .hud{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .pill{
      background:rgba(255,255,255,.75);
      border:1px solid var(--line);
      backdrop-filter: blur(8px);
      border-radius:999px;
      padding:8px 12px;
      box-shadow: 0 10px 22px rgba(2,6,23,.10);
      font-size:13px;
      color:var(--muted);
      display:flex;
      gap:10px;
      align-items:center;
    }

    .wrap{
      max-width:1180px;
      margin:0 auto;
      padding:0 18px 26px;
    }

    .layout{
      display:grid;
      grid-template-columns: 1.05fr 1.95fr;
      gap:14px;
      align-items:start;
    }

    .panel{
      background:rgba(255,255,255,.8);
      border:1px solid var(--line);
      backdrop-filter: blur(8px);
      border-radius:18px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .panelHd{
      padding:12px 14px;
      border-bottom:1px solid var(--line);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .panelHd .meta{
      font-size:13px;
      color:var(--muted);
      margin-top:4px;
    }

    .panelBd{ padding:14px; }

    .btnRow{ display:flex; gap:8px; flex-wrap:wrap; }
    button{
      border:1px solid var(--line);
      background:rgba(255,255,255,.85);
      color:var(--ink);
      padding:10px 12px;
      border-radius:14px;
      font-size:14px;
      cursor:pointer;
      transition: transform .08s ease, box-shadow .12s ease, background .12s ease;
      box-shadow: 0 10px 20px rgba(2,6,23,.08);
    }
    button:hover{ transform: translateY(-1px); }
    button:active{ transform: translateY(0px) scale(.99); }
    button.primary{
      background: linear-gradient(135deg, #2563eb, #7c3aed);
      color:#fff;
      border-color: transparent;
    }
    button:disabled{
      opacity:.55;
      cursor:not-allowed;
      transform:none;
      box-shadow:none;
    }

    /* å·¦åœ–å€ */
    .imgWrap{
      height:360px;
      border-radius:16px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, #ffffff, #f8fafc);
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      overflow:hidden;
    }
    .imgWrap::after{
      content:"";
      position:absolute; inset:-40px;
      background:
        radial-gradient(260px 220px at 30% 30%, rgba(59,130,246,.18), transparent 60%),
        radial-gradient(260px 220px at 70% 40%, rgba(34,197,94,.16), transparent 60%),
        radial-gradient(260px 220px at 40% 75%, rgba(245,158,11,.14), transparent 60%);
      pointer-events:none;
      filter: blur(0px);
    }
    #shapeImg{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      position:relative;
      z-index:1;
    }

    .status{
      margin-top:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px dashed rgba(15,23,42,.18);
      background: rgba(255,255,255,.75);
      color: var(--muted);
      font-size:14px;
      line-height:1.45;
    }
    .status.good{
      border-color: rgba(22,163,74,.35);
      background: rgba(22,163,74,.10);
      color:#0f5f2b;
    }
    .status.bad{
      border-color: rgba(220,38,38,.35);
      background: rgba(220,38,38,.10);
      color:#7f1d1d;
    }

    /* å³ï¼šå¡ç‰‡å€ */
    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:12px;
    }
    .group{
      border-radius:16px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.78);
      box-shadow: var(--cardShadow);
      padding:12px;
    }
    .group h3{
      margin:0 0 10px;
      font-size:14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
    }
    .tag{
      font-size:12px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid var(--line);
      color: var(--muted);
      background: rgba(255,255,255,.8);
    }

    .opts{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }
    .opt{
      padding:10px 10px;
      border-radius:14px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(248,250,252,.95));
      cursor:pointer;
      user-select:none;
      transition: transform .08s ease, box-shadow .12s ease, border-color .12s ease;
      box-shadow: 0 10px 20px rgba(2,6,23,.07);
      font-size:14px;
    }
    .opt:hover{ transform: translateY(-1px); }
    .opt.selected{
      border-color: rgba(37,99,235,.55);
      outline: 2px solid rgba(37,99,235,.25);
      background: linear-gradient(135deg, rgba(59,130,246,.16), rgba(124,58,237,.10));
    }

    .footer{
      padding:12px 14px;
      border-top:1px solid var(--line);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      color:var(--muted);
      font-size:13px;
    }

    /* ç°¡æ˜“å½©è‰²æ˜Ÿæ˜Ÿï¼ˆé€šé—œæ•ˆæœï¼‰ */
    .fx{
      position:absolute;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:2;
    }
    .star{
      position:absolute;
      font-size:18px;
      animation: pop 900ms ease-out forwards;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.15));
    }
    @keyframes pop{
      0%{ transform: translateY(20px) scale(.6); opacity:0; }
      25%{ opacity:1; }
      100%{ transform: translateY(-70px) scale(1.1); opacity:0; }
    }

    @media(max-width:980px){
      .layout{ grid-template-columns: 1fr; }
      .imgWrap{ height:320px; }
    }
  </style>
</head>

<body>
<header>
  <div class="titleRow">
    <div>
      <h1>ç«‹é«”åœ–å½¢é…å°é€šé—œï¼ˆéŠæˆ²ç‰ˆï¼‰</h1>
      <div class="sub">è§€å¯Ÿå·¦é‚Šåœ–å½¢ï¼Œå³é‚Šå››é¡å„é¸ä¸€å¼µï¼šA è§’æŸ±/è§’éŒï½œB å´é¢å½¢ç‹€ï½œC é¢æ•¸ï½œD åå­—ã€‚é€šé—œå¾Œè‡ªå‹•ä¸‹ä¸€é¡Œã€‚</div>
    </div>
    <div class="hud">
      <div class="pill"><span>âœ… å·²é€šé—œï¼š</span><strong id="cleared">0</strong></div>
      <div class="pill"><span>ğŸ® é¡Œç›®ï¼š</span><strong id="total">0</strong></div>
    </div>
  </div>
</header>

<div class="wrap">
  <div class="layout">

    <!-- å·¦ï¼šåœ–ç‰‡ -->
    <div class="panel">
      <div class="panelHd">
        <div>
          <div style="font-weight:800;">æœ¬é¡Œåœ–å½¢</div>
          <div class="meta" id="meta">è«‹é…å°å³é‚Šå››é¡å­—å¡ã€‚</div>
        </div>
        <div class="btnRow">
          <button id="btnNew">ä¸‹ä¸€é¡Œ</button>
          <button id="btnReset">é‡è¨­é¸æ“‡</button>
        </div>
      </div>

      <div class="panelBd">
        <div class="imgWrap">
          <img id="shapeImg" alt="ç«‹é«”åœ–å½¢" />
          <div class="fx" id="fx"></div>
        </div>
        <div class="status" id="status">æç¤ºï¼šå››é¡éƒ½è¦æ€å…ˆå¯ä»¥æäº¤ã€‚</div>
      </div>
    </div>

    <!-- å³ï¼šé…å° -->
    <div class="panel">
      <div class="panelHd">
        <div style="font-weight:800;">å››é¡å­—å¡é…å°</div>
        <div class="btnRow">
          <button class="primary" id="btnSubmit" disabled>æäº¤</button>
        </div>
      </div>

      <div class="panelBd">
        <div class="grid">
          <div class="group">
            <h3>A é¡ <span class="tag">è§’æŸ± / è§’éŒ</span></h3>
            <div class="opts" id="A"></div>
          </div>

          <div class="group">
            <h3>B é¡ <span class="tag">å´é¢å½¢ç‹€</span></h3>
            <div class="opts" id="B"></div>
          </div>

          <div class="group">
            <h3>C é¡ <span class="tag">ç¸½é¢æ•¸</span></h3>
            <div class="opts" id="C"></div>
          </div>

          <div class="group">
            <h3>D é¡ <span class="tag">åå­—</span></h3>
            <div class="opts" id="D"></div>
          </div>
        </div>
      </div>

      <div class="footer">
        <div id="hint">å››é¡éƒ½è¦æ€å…ˆå¯æäº¤</div>
        <div>é€šé—œå¾Œ <strong>1 ç§’</strong> è‡ªå‹•ä¸‹ä¸€é¡Œ</div>
      </div>
    </div>

  </div>
</div>

<script>
/* ========= é¡Œåº«ï¼ˆå›ºå®š 6 å€‹ï¼‰ ========= */
const SHAPES = [
  { n:3, t:"pyramid", name:"ä¸‰è§’éŒ" },
  { n:4, t:"pyramid", name:"å››è§’éŒ" },
  { n:5, t:"pyramid", name:"äº”è§’éŒ" },
  { n:3, t:"prism",   name:"ä¸‰è§’æŸ±" },
  { n:4, t:"prism",   name:"å››è§’æŸ±" },
  { n:5, t:"prism",   name:"äº”è§’æŸ±" },
];

function facesCount(n,t){ return (t==="pyramid") ? (n+1) : (n+2); }
function imgPath(n,t){ return `${t}${n}.svg`; } // åŒä¸€å±¤

/* ========= DOM ========= */
const el = {
  img: document.getElementById("shapeImg"),
  meta: document.getElementById("meta"),
  status: document.getElementById("status"),
  A: document.getElementById("A"),
  B: document.getElementById("B"),
  C: document.getElementById("C"),
  D: document.getElementById("D"),
  submit: document.getElementById("btnSubmit"),
  reset: document.getElementById("btnReset"),
  next: document.getElementById("btnNew"),
  hint: document.getElementById("hint"),
  cleared: document.getElementById("cleared"),
  total: document.getElementById("total"),
  fx: document.getElementById("fx"),
};

/* ========= ç‹€æ…‹ ========= */
let current = null; // {n,t,name, ans}
let pick = {A:null,B:null,C:null,D:null};
let cleared = 0;
let total = 0;
let autoTimer = null;

/* ========= å·¥å…· ========= */
function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}
function pickOne(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
function setStatus(kind, text){
  el.status.className = "status" + (kind ? (" " + kind) : "");
  el.status.textContent = text;
}

/* ========= UIï¼šæ˜Ÿæ˜Ÿæ•ˆæœ ========= */
function fireStars(){
  const stars = ["â­","âœ¨","ğŸŒŸ","ğŸ’«"];
  const colors = ["#2563eb","#7c3aed","#22c55e","#f59e0b","#ef4444","#06b6d4"];
  for(let i=0;i<12;i++){
    const s = document.createElement("div");
    s.className = "star";
    s.textContent = pickOne(stars);
    s.style.left = (10 + Math.random()*80) + "%";
    s.style.top = (55 + Math.random()*25) + "%";
    s.style.color = pickOne(colors);
    s.style.fontSize = (16 + Math.random()*10) + "px";
    el.fx.appendChild(s);
    setTimeout(()=>s.remove(), 950);
  }
}

/* ========= é¸é …æ¸²æŸ“ ========= */
function resetPick(){
  pick = {A:null,B:null,C:null,D:null};
  document.querySelectorAll(".opt").forEach(o=>o.classList.remove("selected"));
  el.submit.disabled = true;
  el.hint.textContent = "å››é¡éƒ½è¦æ€å…ˆå¯æäº¤";
  el.meta.textContent = "è«‹é…å°å³é‚Šå››é¡å­—å¡ã€‚";
  setStatus("", "æç¤ºï¼šå››é¡éƒ½è¦æ€å…ˆå¯ä»¥æäº¤ã€‚");
}

function makeOpt(groupKey, text){
  const d = document.createElement("div");
  d.className = "opt";
  d.textContent = text;
  d.onclick = ()=>{
    pick[groupKey] = text;
    const groupEl = el[groupKey];
    [...groupEl.children].forEach(c => c.classList.toggle("selected", c === d));
    const ok = pick.A && pick.B && pick.C && pick.D;
    el.submit.disabled = !ok;
    el.hint.textContent = ok ? "å·²é¸å››é¡ï¼Œå¯ä»¥æäº¤" : "å››é¡éƒ½è¦æ€å…ˆå¯æäº¤";
  };
  return d;
}

function buildCards(){
  el.A.innerHTML = el.B.innerHTML = el.C.innerHTML = el.D.innerHTML = "";
  resetPick();

  const {n,t,name} = current;

  // æ­£ç¢ºç­”æ¡ˆï¼ˆå­—ä¸²ä¸€å¾‹å›ºå®šï¼Œé¿å…ã€ŒD é¡æ°¸é å°å””åˆ°ã€ï¼‰
  current.ans = {
    A: (t==="prism") ? "è§’æŸ±" : "è§’éŒ",
    B: (t==="prism") ? "å´é¢æ˜¯å››é‚Šå½¢" : "å´é¢æ˜¯ä¸‰è§’å½¢",
    C: `ç¸½å…±æœ‰ï¼ˆ${facesCount(n,t)}ï¼‰å€‹é¢`,
    D: `åå­—æ˜¯ï¼ˆ${name}ï¼‰`,
  };

  // Aï¼šè§’æŸ±/è§’éŒï¼ˆå›ºå®š 2ï¼‰
  shuffle(["è§’æŸ±","è§’éŒ"]).forEach(v=> el.A.appendChild(makeOpt("A", v)));

  // Bï¼šå´é¢å½¢ç‹€ï¼ˆå›ºå®š 2ï¼‰
  shuffle(["å´é¢æ˜¯ä¸‰è§’å½¢","å´é¢æ˜¯å››é‚Šå½¢"]).forEach(v=> el.B.appendChild(makeOpt("B", v)));

  // Cï¼šæ­£ç¢º + 2 å¹²æ“¾ï¼ˆå¾å…¶å®ƒå½¢ç‹€é¢æ•¸æŠ½ï¼Œä¿è­‰åŒ…å«æ­£ç¢ºï¼‰
  const correctFaces = facesCount(n,t);
  const faceSet = new Set([correctFaces]);
  while(faceSet.size < 3){
    const s = pickOne(SHAPES);
    faceSet.add(facesCount(s.n, s.t));
  }
  shuffle([...faceSet].map(v=>`ç¸½å…±æœ‰ï¼ˆ${v}ï¼‰å€‹é¢`))
    .forEach(v=> el.C.appendChild(makeOpt("C", v)));

  // Dï¼šâœ… ä¿®æ­£é‡é»ï¼šå¾ 6 å€‹å›ºå®šåå­—æŠ½ï¼Œå¿…å«æ­£ç¢º
  const namesAll = SHAPES.map(s=>s.name);
  const rest = namesAll.filter(x => x !== name);
  const dOpts = shuffle(rest).slice(0,3);
  dOpts.push(name); // ä¸€å®šåŒ…å«æ­£ç¢º
  shuffle(dOpts.map(v=>`åå­—æ˜¯ï¼ˆ${v}ï¼‰`))
    .forEach(v=> el.D.appendChild(makeOpt("D", v)));
}

/* ========= å‡ºé¡Œ ========= */
function loadImage(n,t){
  el.img.src = imgPath(n,t);
  el.img.onerror = ()=>{
    setStatus("bad", "åœ–ç‰‡è¼‰å…¥å¤±æ•—ï¼šè«‹ç¢ºèª pyramid3.svgã€prism4.svg ç­‰æª”æ¡ˆèˆ‡ index.html æ”¾åœ¨åŒä¸€å±¤ï¼Œä¸”å·² commitã€‚");
  };
}

function newQuestion(){
  if(autoTimer) { clearTimeout(autoTimer); autoTimer = null; }

  current = JSON.parse(JSON.stringify(pickOne(SHAPES)));
  total += 1;
  el.total.textContent = String(total);

  loadImage(current.n, current.t);
  buildCards();
}

/* ========= æäº¤ ========= */
function submit(){
  const ans = current.ans;
  const wrong = [];
  if(pick.A !== ans.A) wrong.push("A");
  if(pick.B !== ans.B) wrong.push("B");
  if(pick.C !== ans.C) wrong.push("C");
  if(pick.D !== ans.D) wrong.push("D");

  if(wrong.length === 0){
    cleared += 1;
    el.cleared.textContent = String(cleared);
    setStatus("good", "ğŸ‰ é€šé—œæˆåŠŸï¼1 ç§’å¾Œè‡ªå‹•ä¸‹ä¸€é¡Œâ€¦");
    el.meta.textContent = `æœ¬é—œåœ–å½¢ï¼š${current.name}`;
    fireStars();

    autoTimer = setTimeout(()=> newQuestion(), 1000);
  }else{
    setStatus("bad", `æœªé€šé—œï¼š${wrong.join("ã€")} é¡æœªé…å°æ­£ç¢ºï¼Œè«‹å†è©¦ã€‚`);
  }
}

/* ========= äº‹ä»¶ ========= */
el.submit.addEventListener("click", submit);
el.reset.addEventListener("click", resetPick);
el.next.addEventListener("click", newQuestion);

/* ========= é–‹å§‹ ========= */
newQuestion();
</script>
</body>
</html>
