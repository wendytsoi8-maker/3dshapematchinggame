<!doctype html>
<html lang="zh-HK">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ç«‹é«”åœ–å½¢é…å°é€šé—œï¼ˆåœ–ç‰‡ç‰ˆï¼‰</title>

  <style>
    :root{
      --bg:#f6f7fb; --card:#ffffff; --ink:#111827; --muted:#6b7280;
      --line:#e5e7eb; --good:#16a34a; --bad:#dc2626; --accent:#2563eb;
    }

    body{
      margin:0;
      font-family:"Noto Sans TC","PingFang TC","Microsoft JhengHei",system-ui,sans-serif;
      background:var(--bg);
      color:var(--ink);
    }

    header{
      padding:16px 18px;
      background:#fff;
      border-bottom:1px solid var(--line);
    }
    header h1{ margin:0; font-size:18px; }
    header p{
      margin:6px 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.4;
    }

    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:16px 18px 28px;
    }

    .top{
      display:grid;
      grid-template-columns: 1.15fr 1.85fr;
      gap:14px;
      align-items:start;
    }

    .panel{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:14px;
      box-shadow:0 8px 24px rgba(0,0,0,.06);
    }

    .panel .hd{
      padding:12px 14px;
      border-bottom:1px solid var(--line);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }

    .panel .hd .meta{
      font-size:13px;
      color:var(--muted);
    }

    .panel .bd{ padding:12px 14px; }

    .controls{ display:flex; gap:8px; flex-wrap:wrap; }

    button{
      border:1px solid var(--line);
      background:#fff;
      padding:10px 12px;
      border-radius:12px;
      font-size:14px;
      cursor:pointer;
    }

    button.primary{
      background:var(--accent);
      color:#fff;
      border-color:transparent;
    }

    button:disabled{
      opacity:.5;
      cursor:not-allowed;
    }

    /* å·¦é‚Šåœ–ç‰‡ */
    #imgWrap{
      height:360px;
      border-radius:12px;
      overflow:hidden;
      background:#ffffff;
      display:flex;
      align-items:center;
      justify-content:center;
      border:1px solid var(--line);
    }

    #shapeImg{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      background:#ffffff;
    }

    .status{
      margin-top:10px;
      padding:10px 12px;
      border-radius:12px;
      border:1px dashed var(--line);
      color:var(--muted);
      font-size:14px;
      line-height:1.5;
    }

    .status.good{
      border-color:rgba(22,163,74,.35);
      background:rgba(22,163,74,.07);
      color:#0f5f2b;
    }

    .status.bad{
      border-color:rgba(220,38,38,.35);
      background:rgba(220,38,38,.07);
      color:#7f1d1d;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:12px;
    }

    .group{ padding:12px 12px 14px; }

    .group h3{
      margin:0 0 8px;
      font-size:14px;
      color:#111827;
    }

    .opts{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }

    .opt{
      padding:10px 10px;
      border-radius:12px;
      border:1px solid var(--line);
      background:#fff;
      font-size:14px;
      cursor:pointer;
      user-select:none;
    }

    .opt.selected{
      outline:2px solid rgba(37,99,235,.35);
      border-color:rgba(37,99,235,.55);
    }

    .footerRow{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      padding:12px 14px;
      border-top:1px solid var(--line);
    }

    .score{ font-size:13px; color:var(--muted); }
    .hint{ font-size:13px; color:var(--muted); }

    @media (max-width:900px){
      .top{ grid-template-columns: 1fr; }
      #imgWrap{ height:320px; }
    }
  </style>
</head>

<body>
<header>
  <h1>ç«‹é«”åœ–å½¢é…å°é€šé—œï¼ˆåœ–ç‰‡ç‰ˆï¼‰</h1>
  <p>è§€å¯Ÿå·¦é‚Šç«‹é«”åœ–å½¢åœ–ç‰‡ï¼Œåœ¨å³é‚Šå››é¡å­—å¡ä¸­å„é¸ä¸€å¼µã€‚å››é¡éƒ½æ­£ç¢ºæ‰ç®—é€šé—œã€‚</p>
</header>

<div class="wrap">
  <div class="top">

    <!-- å·¦ï¼šåœ–ç‰‡ -->
    <div class="panel">
      <div class="hd">
        <div>
          <div style="font-weight:700;">ç«‹é«”åœ–å½¢åœ–ç‰‡</div>
          <div class="meta" id="shapeMeta">è«‹è§€å¯Ÿåœ–å½¢ï¼Œå®Œæˆé…å°ã€‚</div>
        </div>
        <div class="controls">
          <button id="btnNew">ä¸‹ä¸€é¡Œ</button>
          <button id="btnReset">é‡è¨­</button>
        </div>
      </div>

      <div class="bd">
        <div id="imgWrap">
          <img id="shapeImg" alt="ç«‹é«”åœ–å½¢" />
        </div>
        <div id="status" class="status">
          æç¤ºï¼šå››é¡å­—å¡éƒ½è¦æ€ï¼Œå…ˆå¯ä»¥æäº¤ã€‚
        </div>
      </div>
    </div>

    <!-- å³ï¼šé…å° -->
    <div class="panel">
      <div class="hd">
        <div style="font-weight:700;">å››é¡å­—å¡é…å°</div>
        <div class="meta">æ¯é¡é¸ 1 å¼µ</div>
      </div>

      <div class="bd">
        <div class="grid">

          <div class="panel group">
            <h3>A é¡ï¼šæŸ±é«”ï¼éŒ</h3>
            <div class="opts" id="groupA"></div>
          </div>

          <div class="panel group">
            <h3>B é¡ï¼šå´é¢å½¢ç‹€</h3>
            <div class="opts" id="groupB"></div>
          </div>

          <div class="panel group">
            <h3>C é¡ï¼šç¸½é¢æ•¸</h3>
            <div class="opts" id="groupC"></div>
          </div>

          <div class="panel group">
            <h3>D é¡ï¼šåå­—</h3>
            <div class="opts" id="groupD"></div>
          </div>

        </div>
      </div>

      <div class="footerRow">
        <div class="score" id="score">å·²é€šé—œï¼š0 ï½œ ç¸½é¡Œæ•¸ï¼š0</div>
        <div style="display:flex; gap:8px; align-items:center;">
          <span class="hint" id="pickHint">å››é¡éƒ½è¦æ€å…ˆå¯æäº¤</span>
          <button class="primary" id="btnSubmit" disabled>æäº¤</button>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
/* ========= è³‡æ–™ ========= */
const POLY_N = [3,4,5];
const TYPES = ["pyramid","prism"];

function shapeName(n, type){
  const map = {3:"ä¸‰",4:"å››",5:"äº”"};
  return map[n] + (type==="pyramid" ? "è§’éŒ" : "è§’æŸ±");
}

function facesCount(n, type){
  return (type==="pyramid") ? (n+1) : (n+2);
}

function solidTypeLabel(type){
  return (type==="pyramid") ? "å®ƒæ˜¯éŒ" : "å®ƒæ˜¯æŸ±é«”";
}

function lateralFaceLabel(type){
  return (type==="pyramid") ? "å®ƒçš„å´é¢æ˜¯ä¸‰è§’å½¢" : "å®ƒçš„å´é¢æ˜¯å››é‚Šå½¢";
}

/* â­ åœ–ç‰‡è·¯å¾‘ï¼ˆåŒä¸€å±¤ï¼‰ */
function imgPath(n, type){
  return `${type}${n}.svg`;
}

/* ========= å·¥å…· ========= */
function shuffle(a){
  const arr = a.slice();
  for(let i=arr.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr;
}
function sample(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

/* ========= DOM ========= */
const els = {
  img: document.getElementById("shapeImg"),
  meta: document.getElementById("shapeMeta"),
  status: document.getElementById("status"),
  score: document.getElementById("score"),
  pickHint: document.getElementById("pickHint"),
  submit: document.getElementById("btnSubmit"),
  newBtn: document.getElementById("btnNew"),
  resetBtn: document.getElementById("btnReset"),
  A: document.getElementById("groupA"),
  B: document.getElementById("groupB"),
  C: document.getElementById("groupC"),
  D: document.getElementById("groupD")
};

/* ========= ç‹€æ…‹ ========= */
let current = null;
let selected = {A:null,B:null,C:null,D:null};
let cleared = 0, total = 0;

/* ========= åŠŸèƒ½ ========= */
function resetSelection(){
  selected = {A:null,B:null,C:null,D:null};
  document.querySelectorAll(".opt").forEach(o=>o.classList.remove("selected"));
  els.submit.disabled = true;
  els.pickHint.textContent = "å››é¡éƒ½è¦æ€å…ˆå¯æäº¤";
  els.status.className = "status";
  els.status.textContent = "æç¤ºï¼šå››é¡å­—å¡éƒ½è¦æ€ã€‚";
  els.meta.textContent = "è«‹è§€å¯Ÿåœ–å½¢ï¼Œå®Œæˆé…å°ã€‚";
}

function makeOption(group, text){
  const d = document.createElement("div");
  d.className = "opt";
  d.textContent = text;
  d.onclick = ()=>{
    selected[group] = text;
    [...els[group].children].forEach(c=>c.classList.toggle("selected", c===d));
    els.submit.disabled = !(selected.A && selected.B && selected.C && selected.D);
  };
  return d;
}

function buildCards(){
  const {n,type} = current;
  els.A.innerHTML = els.B.innerHTML = els.C.innerHTML = els.D.innerHTML = "";
  resetSelection();

  const ans = {
    A: solidTypeLabel(type),
    B: lateralFaceLabel(type),
    C: `å®ƒç¸½å…±æœ‰ï¼ˆ${facesCount(n,type)}ï¼‰å€‹é¢`,
    D: `å®ƒçš„åå­—æ˜¯ï¼ˆ${shapeName(n,type)}ï¼‰`
  };
  current.answers = ans;

  shuffle(["å®ƒæ˜¯æŸ±é«”","å®ƒæ˜¯éŒ"]).forEach(t=>els.A.appendChild(makeOption("A",t)));
  shuffle(["å®ƒçš„å´é¢æ˜¯ä¸‰è§’å½¢","å®ƒçš„å´é¢æ˜¯å››é‚Šå½¢"]).forEach(t=>els.B.appendChild(makeOption("B",t)));

  const cPool = shuffle([facesCount(n,type), 5, 6, 7]).slice(0,3);
  cPool.map(v=>`å®ƒç¸½å…±æœ‰ï¼ˆ${v}ï¼‰å€‹é¢`).forEach(t=>els.C.appendChild(makeOption("C",t)));

  const names = [];
  while(names.length<4){
    const nm = shapeName(sample(POLY_N), sample(TYPES));
    if(!names.includes(nm)) names.push(nm);
  }
  shuffle(names.map(v=>`å®ƒçš„åå­—æ˜¯ï¼ˆ${v}ï¼‰`))
    .forEach(t=>els.D.appendChild(makeOption("D",t)));
}

function newQuestion(){
  const n = sample(POLY_N);
  const type = sample(TYPES);
  current = {n,type};
  total++;
  els.score.textContent = `å·²é€šé—œï¼š${cleared} ï½œ ç¸½é¡Œæ•¸ï¼š${total}`;
  els.img.src = imgPath(n,type);
  buildCards();
}

function submit(){
  const wrong = [];
  for(const k in current.answers){
    if(selected[k] !== current.answers[k]) wrong.push(k);
  }
  if(wrong.length===0){
    cleared++;
    els.score.textContent = `å·²é€šé—œï¼š${cleared} ï½œ ç¸½é¡Œæ•¸ï¼š${total}`;
    els.status.className = "status good";
    els.status.textContent = "ğŸ‰ é€šé—œæˆåŠŸï¼";
    els.meta.textContent = `æœ¬é—œåœ–å½¢ï¼š${shapeName(current.n,current.type)}`;
  }else{
    els.status.className = "status bad";
    els.status.textContent = "æœªé€šé—œï¼Œè«‹å†è©¦ã€‚";
  }
}

/* ========= äº‹ä»¶ ========= */
els.submit.onclick = submit;
els.newBtn.onclick = newQuestion;
els.resetBtn.onclick = resetSelection;

/* ========= é–‹å§‹ ========= */
newQuestion();
</script>
</body>
</html>
